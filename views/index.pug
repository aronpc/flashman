extends layout

block content
  if ! devices || devices.length == 0
    h3.text-center Nenhum dispositivo registrado
  else
    table.table.table-responsive.devices-table
      tr
        th.text-center #
        th.text-center Status
        th.text-center Usuário PPPoE
        th.text-center Senha PPPoE
        th.text-center Identificação
        th.text-center IP WAN
        th.text-center IP Público
        th.text-center Modelo
        th.text-center Versão
        th.text-center Release
        th.text-center Atualizar Firmware
      tr
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center *
        td.text-center
          label.switch
            input.checkbox(id="all-devices", type="checkbox", name="do_update", checked=false)
            .slider.round
      each device, index in devices
        tr(id=device._id)
          td.text-center.col-xs-1=index + 1
          td.text-center.col-xs-1(class=status[device._id] data-toggle="tooltip" title=device.last_contact)
          td.text-center.col-xs-2
            | #{device.pppoe_user}
          td.text-center.col-xs-2
            | #{device.pppoe_password}
          td.text-center.col-xs-2
            | #{device._id}
          td.text-center.col-xs-1
            | #{device.wan_ip}
          td.text-center.col-xs-1
            | #{device.ip}
          td.text-center.col-xs-2
            | #{device.model}
          td.text-center.col-xs-1
            | #{device.version}
          td.text-center.col-xs-2
            .dropdown
              button.btn.btn-default.dropdown-toggle(type="button", data-toggle="dropdown", aria-haspopup="true", aria-expanded="true")
                span.selected #{device.release} &nbsp
                span.caret
              ul.dropdown-menu
                li
                  a(href="#").text-center #{device.release}
                each release, idx in releases
                  - if (device.model === release.model)
                      li
                        a(href="#").text-center #{release.id}
          td.text-center.col-xs-2
            label.switch
              input.checkbox(type="checkbox", name="do_update", checked=device.do_update)
              .slider.round
block scripts
  script(src='/javascripts/update_device.js')
